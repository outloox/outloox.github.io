(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),a=s(2115),n=s(4253),i=s(2085),d=s(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:l=!1,...c}=e,u=l?n.DX:"button";return(0,r.jsx)(u,{className:(0,d.cn)(o({variant:a,size:i,className:s})),ref:t,...c})});l.displayName="Button"},293:(e,t,s)=>{Promise.resolve().then(s.bind(s,3422))},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155),a=s(2115),n=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},3422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(5155),a=s(2115),n=s(6104),i=s(1115),d=s(285),o=s(2523),l=s(9434);let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});c.displayName="Card";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});u.displayName="CardHeader";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});m.displayName="CardTitle";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});f.displayName="CardDescription";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...a})});p.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";var x=s(172),g=s(1133),h=s(4301),v=s(7223),b=s(7481),y=s(5365),j=s(8461);let N={};function w(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[j,w]=(0,a.useState)(null),{toast:A}=(0,b.dj)(),[S,T]=(0,a.useTransition)(),[D,_]=(0,a.useTransition)(),[k,E]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=(0,i.KR)(n.db,"accounts"),s=(0,i.Zy)(e,e=>{w(null);try{if(e.exists()){let s=e.val(),r=Object.keys(s).map(e=>({id:e,...s[e]}));t(r)}else t([])}catch(e){console.error("Firebase read failed in AdminPage:",e),w("Failed to process data from the database. Details: ".concat(e.message))}finally{l(!1)}},e=>{console.error("Firebase connection failed in AdminPage:",e),w("Failed to connect to the database. Check Firebase rules and config. Details: ".concat(e.message)),l(!1)});return()=>s()},[]);let F=async e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=e.currentTarget;T(async()=>{var e;let r=t.get("country")||"",a=N[r.replace(/[\u{1F3FB}-\u{1F3FF}]/gu,"").trim()]||r,d={email:t.get("email"),password:t.get("password"),country:a,services:(null==(e=t.get("services"))?void 0:e.split(",").map(e=>e.trim()).filter(Boolean))||[],createdAt:new Date().toISOString(),reportCount:0};try{let e=(0,i.KR)(n.db,"accounts"),t=(0,i.VC)(e);await (0,i.hZ)(t,d),A({title:"Success",description:"Account added successfully!"}),s.reset(),E("")}catch(e){A({title:"Error",description:"Failed to add account. Details: ".concat(e.message),variant:"destructive"})}})},C=e=>{_(async()=>{try{let t=(0,i.KR)(n.db,"accounts/".concat(e));await (0,i.TF)(t),A({title:"Success",description:"Account deleted successfully!"})}catch(e){A({title:"Error",description:"Failed to delete account. Details: ".concat(e.message),variant:"destructive"})}})};return(0,r.jsx)("div",{className:"min-h-screen bg-muted/40",children:(0,r.jsxs)("div",{className:"container mx-auto max-w-5xl py-8 px-4",children:[(0,r.jsxs)("header",{className:"text-center mb-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold tracking-tight text-primary",children:"Admin Panel"}),(0,r.jsx)("p",{className:"mt-2 text-lg text-muted-foreground",children:"Manage your Outloox application."})]}),s&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,r.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading Admin Panel..."})]}),j&&!s&&(0,r.jsxs)(y.Fc,{variant:"destructive",className:"mb-8",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)(y.XL,{children:"Database Connection Error"}),(0,r.jsx)(y.TN,{children:j})]}),!s&&!j&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[(0,r.jsxs)(c,{children:[(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:"Add New Account"}),(0,r.jsx)(f,{children:"Fill in the details to add a new account."})]}),(0,r.jsx)(p,{children:(0,r.jsxs)("form",{id:"add-account-form",onSubmit:F,className:"space-y-4",children:[(0,r.jsx)(o.p,{name:"email",placeholder:"Email",required:!0,type:"email"}),(0,r.jsx)(o.p,{name:"password",placeholder:"Password"}),(0,r.jsx)(o.p,{name:"country",placeholder:"Country (e.g. \uD83C\uDDF8\uD83C\uDDE6 or Saudi Arabia)",required:!0,value:k,onChange:e=>E(e.target.value)}),(0,r.jsx)(o.p,{name:"services",placeholder:"Services (comma-separated)"}),(0,r.jsxs)(d.$,{type:"submit",disabled:S,className:"gap-2 w-full",children:[S?(0,r.jsx)(x.A,{className:"animate-spin h-4 w-4"}):(0,r.jsx)(h.A,{className:"h-4 w-4"}),"Add Account"]})]})})]}),(0,r.jsxs)(c,{children:[(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{children:"Manage Accounts"}),(0,r.jsxs)(f,{children:[e.length," accounts found."]})]}),(0,r.jsx)(p,{children:(0,r.jsx)("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:e.length>0?e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-background rounded-lg border",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.email}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.country})]}),(0,r.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>C(e.id),disabled:D,className:"shrink-0 ml-4",children:(0,r.jsx)(v.A,{className:"h-4 w-4 text-destructive"})})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"No accounts found."}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground/80",children:"Add one using the form on the left."})]})})})]})]})]})})}j.forEach(e=>{N[e.emoji]=e.name})},5365:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>o,TN:()=>c,XL:()=>l});var r=s(5155),a=s(2115),n=s(2085),i=s(9434);let d=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(d({variant:a}),s),...n})});o.displayName="Alert";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});l.displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},6104:(e,t,s)=>{"use strict";s.d(t,{db:()=>i});var r=s(3915),a=s(1115);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({projectId:"new-prototype-nwxqu",appId:"1:566429311781:web:0e519ebb825211d131f0cc",storageBucket:"new-prototype-nwxqu.appspot.com",apiKey:"AIzaSyDU-1IcfrQ5D_-p8Sd_-1ysByR70Yb4Yto",authDomain:"new-prototype-nwxqu.firebaseapp.com",measurementId:"",databaseURL:"https://new-prototype-nwxqu-default-rtdb.europe-west1.firebasedatabase.app"}),i=(0,a.C3)(n)},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],l={toasts:[]};function c(e){l=d(l,e),o.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2596),a=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,277,662,539,441,684,358],()=>t(293)),_N_E=e.O()}]);